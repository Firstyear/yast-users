/**
 * File:
 *  ImportExportUser.ycp
 *
 * Module:
 *  Users configurator
 *
 * Summary:
 *  converting user maps: autoyast -> users module -> autoyast
 *
 * Authors:
 *  Jiri Suchomel <jsuchome@suse.cz>
 *
 */

{
    // testedfiles: Users.pm UsersCache.pm

    import "Users";
    import "UsersCache";
    import "Mode";
    import "Directory";
    import "Progress";
    import "Report";
    import "Testsuite";

    Testsuite::Dump ("==========================================================");

    Mode::SetTest ("test");

    map<string,any> importing = $[
	"encrypted": true,
	"forename":"aa",
	"surname":"A",
	"uid":500,
        "gid":500,
	"home":"/home/aaa",
	"user_password":"5OkhN2nLxMfEY",
	"password_settings":$[
	    "inact":-1,
	    "max":99999,
	    "min":0,
	    "warn":7
        ],
        "grouplist":"audio",
	"shell":"/bin/bash",
	"username":"aaa"
    ];

    Testsuite::Dump ( sformat ("importing:\n %1", importing) );

    Testsuite::Dump ("==== processing ImportUser... ============================");

    map<string,any> user = (map<string,any>)
	Testsuite::Test(``(Users::ImportUser (importing)), [], 0);

    Testsuite::Dump ("==== processing ExportUser... ============================");

    Testsuite::Test(``(Users::ExportUser (user)), [], 0);

}
